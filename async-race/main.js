(()=>{"use strict";var e={800:(e,n,t)=>{t.d(n,{Z:()=>E});var r=t(81),i=t.n(r),a=t(645),o=t.n(a),s=t(972),d=t(667),l=t.n(d),c=new URL(t(275),t.b),u=new URL(t(663),t.b),h=new URL(t(201),t.b),p=new URL(t(93),t.b),g=new URL(t(210),t.b),f=new URL(t(767),t.b),m=new URL(t(935),t.b),v=o()(i());v.i(s.Z);var b=l()(c),w=l()(u),y=l()(h),x=l()(p),S=l()(g),C=l()(f),$=l()(m);v.push([e.id,'@font-face{font-family:"Inter";src:url('+b+') format("woff2"),url('+w+') format("woff");font-weight:normal;font-style:normal;font-display:swap}@font-face{font-family:"Inter";src:url('+y+') format("woff2"),url('+x+') format("woff");font-weight:600;font-style:normal;font-display:swap}@font-face{font-family:"Inter";src:url('+S+') format("woff2"),url('+C+') format("woff");font-weight:bold;font-style:normal;font-display:swap}*{box-sizing:border-box;margin:0}html{scroll-behavior:smooth}body{min-height:100vh;font-family:"Inter",serif;font-weight:400;font-size:16px;color:#fff;background-image:url('+$+");background-size:cover}ul{margin:0;padding:0;list-style:none}button{cursor:pointer;padding:4px 36px;font-size:18px;font-weight:600;line-height:24px;text-transform:capitalize;color:#19192e;background-color:#55ff5c;border:none;border-radius:4px;box-shadow:2px 2px 4px #19192e,6px 6px 30px #141414}@media(max-width: 600px){button{font-size:16px}}button:hover{background-color:#40bf45;transition:ease-in-out .3s}button:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}button:disabled:hover{cursor:default;background-color:rgba(37,36,50,.4)}button:active{box-shadow:none}h1,h2,h3,p{margin:0}.hidden{display:none}.container{padding:0 24px}.header{margin-top:16px;margin-bottom:32px}.nav-list{display:flex;gap:36px}.nav-item{padding:8px 16px;font-weight:800;text-transform:uppercase}.nav-item:hover{cursor:pointer}.nav-item-active{color:#55ff5c;border-bottom:2px solid #55ff5c}.main{position:relative;margin-bottom:32px}footer{margin-bottom:32px}.edit-wrapper{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}.edit-car{display:flex;gap:8px}.garage-input{padding:9px 8px;line-height:24px;color:#19192e;color-scheme:dark;color:#55ff5c;background-color:rgba(0,0,0,0);border:2px solid #55ff5c;border-radius:4px}.garage-input:focus{background-color:#3b5f4f;outline-color:#55ff5c}@media(max-width: 600px){.garage-input[type=text]{width:232px}}.color-input{padding:2px;height:44px}.color-input:hover{cursor:pointer}.garage-input:disabled,.color-input:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878}.edit-btn{width:140px;color:#40bf45;background-color:rgba(0,0,0,0);border:2px solid #40bf45}@media(max-width: 600px){.edit-btn{width:126px}}.edit-btn:hover{background-color:#3b5f4f}.race-wrapper{display:flex;gap:10px;margin-bottom:32px}.race-wrapper button{padding:4px 34px}.race-wrapper button.race-btn:disabled{width:111px}.reset-btn{color:#ff7070;background:rgba(255,112,112,.1019607843);border:2px solid #ff7070}.reset-btn:hover{background-color:rgba(0,0,0,0)}.generate-btn{margin-left:4px}@media(max-width: 600px){.generate-btn{margin-left:0}}.generate-btn:disabled{margin-left:0}@media(max-width: 600px){.generate-btn:disabled{padding:4px 31px}}.generate-btn:hover{background-color:#40bf45}.winner-popup{position:absolute;width:40%;height:200px;left:50%;top:150px;transform:translateX(-50%);text-align:center}@media(max-width: 720px){.winner-popup{width:50%}}@media(max-width: 600px){.winner-popup{left:70%;top:170px}}.winner-text{margin:20px auto;font-size:36px;color:#55ff5c}@media(max-width: 1000px){.winner-text{font-size:24px}}@media(max-width: 600px){.winner-text{font-size:16px;font-weight:600}}.page-title{margin-bottom:24px}.cars-list{display:flex;flex-direction:column;gap:12px;margin-bottom:32px}.car-item{display:flex;flex-direction:column;gap:12px;border-bottom:4px dashed #fff}.car-item button{padding:2px 16px;font-size:14px}.car-header{display:flex;gap:24px;align-items:center}.car-selection{display:flex;gap:4px;align-items:center}button.remove-btn{align-self:center;padding-top:0;height:28px;color:#ff7070;background:rgba(255,112,112,.1019607843);border:2px solid #ff7070}button.remove-btn:hover{background-color:rgba(0,0,0,0)}.car-name{font-weight:600}.car-body{position:relative;display:flex;gap:24px}@media(max-width: 720px){.car-body{gap:12px}}@media(max-width: 600px){.car-body{gap:6px}}.car-drive-controls button{padding:2px;width:40px;color:#55ff5c;border:2px solid #55ff5c}button.drive-btn{background:rgba(0,0,0,0)}button.drive-btn:hover{color:#40bf45;background-color:#3b5f4f;border:2px solid #40bf45}button.drive-btn:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}button.stop-btn{color:#ff7070;background:rgba(255,112,112,.1019607843);border:2px solid #ff7070}button.stop-btn:hover{color:#ff4a4a;background:rgba(0,0,0,0);border:2px solid #ff4a4a}button.stop-btn:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}.car-image{width:100px;height:60px}.finish{position:absolute;right:10%;width:60px;height:60px}@media(max-width: 600px){.finish{right:15%}}.pagination{display:flex;align-items:center;gap:12px}.pagination button{padding:0;width:80px;font-size:12px;color:#40bf45;background:rgba(0,0,0,0);border:2px solid #40bf45}.pagination button:hover{background-color:#3b5f4f}.pagination button:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}.winners-table{table-layout:fixed;margin-bottom:20px;width:80%;color:#19192e;border-collapse:collapse}.winners-table .car-image{margin:0 auto;width:50px;height:30px}.winners-table thead th{font-weight:600;background-color:#55ff5c}.winners-table tbody{background-color:rgba(0,0,0,0)}.winners-table th{padding:10px 5px;font-weight:400}.winners-table td{padding:5px 10px;text-align:left}.winners-table tbody tr:nth-child(odd){color:#55ff5c;background-color:rgba(0,0,0,0)}.winners-table tbody tr:nth-child(even){color:#fff;background:linear-gradient(179.55deg, rgba(39, 150, 70, 0.8) 0.39%, rgba(39, 150, 70, 0) 113.14%)}",""]);const E=v},972:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(81),i=t.n(r),a=t(645),o=t.n(a)()(i());o.push([e.id,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n',""]);const s=o},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(o[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),n.push(c))}},n}},667:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var d=e[s],l=r.base?d[0]+r.base:d[0],c=a[l]||0,u="".concat(l," ").concat(c);a[l]=c+1;var h=t(u),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==h)n[h].references++,n[h].updater(p);else{var g=i(p,r);r.byIndex=s,n.splice(s,0,{identifier:u,updater:g,references:1})}o.push(u)}return o}function i(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=t(a[o]);n[s].references--}for(var d=r(e,i),l=0;l<a.length;l++){var c=t(a[l]);0===n[c].references&&(n[c].updater(),n.splice(c,1))}a=d}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,i&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},935:(e,n,t)=>{e.exports=t.p+"assets/images/bg.jpg"},767:(e,n,t)=>{e.exports=t.p+"assets/fonts/Inter-ExtraBold.woff"},210:(e,n,t)=>{e.exports=t.p+"assets/fonts/Inter-ExtraBold.woff2"},663:(e,n,t)=>{e.exports=t.p+"assets/fonts/Inter-Regular.woff"},275:(e,n,t)=>{e.exports=t.p+"assets/fonts/Inter-Regular.woff2"},93:(e,n,t)=>{e.exports=t.p+"assets/fonts/Inter-SemiBold.woff"},201:(e,n,t)=>{e.exports=t.p+"assets/fonts/Inter-SemiBold.woff2"}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={id:r,exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,t.nc=void 0,(()=>{var e=t(379),n=t.n(e),r=t(795),i=t.n(r),a=t(569),o=t.n(a),s=t(565),d=t.n(s),l=t(216),c=t.n(l),u=t(589),h=t.n(u),p=t(800),g={};g.styleTagTransform=h(),g.setAttributes=d(),g.insert=o().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=c(),n()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals;class f{static isLastPage(e){let n,t,r;return"garage"===e?(n=f.savedState.pageNumGarage,t=f.savedState.pageLimitGarage,r=f.savedState.totalCars):(n=f.savedState.pageNumWinners,t=f.savedState.pageLimitWinners,r=f.savedState.totalWinners),!(n*t<r)}}f.savedState={pageNumGarage:1,pageLimitGarage:7,cars:[],totalCars:0,page:"garage",id:"",animation:{},race:!1,winnerFound:!1,controller:{},duration:{},pageNumWinners:1,pageLimitWinners:10,winners:[],winnersFullDetails:{},totalWinners:0};const m=f,v=class{render(){this.renderHeader(),this.renderMain(),this.renderFooter(m.savedState.page)}renderPagination(e){let n;return"garage"===e&&(n=m.savedState.pageNumGarage),"winners"===e&&(n=m.savedState.pageNumWinners),`<button class="previous-btn">previous</button>\n    <p>Page <span class="current-page">${n}</span></p>\n  <button class="next-btn">next</button>`}renderFooter(e){const n=`<footer class="pagination container">\n    ${this.renderPagination(e)}\n  </footer>`;document.body.innerHTML+=n}renderHeader(){document.body.innerHTML='<header class="header container">\n      <nav class="navigation">\n        <ul class="nav-list">\n          <li class="nav-item nav-item-active">Garage</li>\n          <li class="nav-item">Winners</li>\n        </ul>\n      </nav>\n    </header>'}renderMain(){document.body.innerHTML+='<main class="main container">\n    <h1 class="hidden">Async race</h1>\n    </main>'}};var b=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{d(r.next(e))}catch(e){a(e)}}function s(e){try{d(r.throw(e))}catch(e){a(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}d((r=r.apply(e,n||[])).next())}))};const w=class{getGarage(e,n,t,r){return b(this,void 0,void 0,(function*(){const i=yield fetch(`${e}${n}?_page=${t}&_limit=${r}`);return{cars:yield i.json(),total:i.headers.get("X-Total-Count")}}))}createCar(e,n,t,r,i){return b(this,void 0,void 0,(function*(){const a=yield fetch(`${e}${n}`,{method:t,body:r,headers:i});return yield a.json()}))}updateCar(e,n,t,r,i,a){return b(this,void 0,void 0,(function*(){const o=yield fetch(`${e}${n}/${t}`,{method:r,body:i,headers:a});return yield o.json()}))}deleteCar(e,n,t,r){return b(this,void 0,void 0,(function*(){const i=yield fetch(`${e}${n}/${t}`,{method:r});return yield i.json()}))}startStopCar(e,n,t,r,i){return b(this,void 0,void 0,(function*(){const a=yield fetch(`${e}${n}?id=${+t}&status=${r}&speed=0`,{method:i}),o=yield a.json(),{velocity:s,distance:d}=o;return{velocity:s,distance:d}}))}switchEngine(e,n,t,r,i,a){return b(this,void 0,void 0,(function*(){const o=yield fetch(`${e}${n}?id=${t}&status=${r}`,{method:i,signal:a});return o.ok||500===o.status||console.log("Error",o),500===o.status?{success:!1}:yield o.json()}))}getWinners(e,n,t,r){return b(this,void 0,void 0,(function*(){const i=yield fetch(`${e}${n}?_page=${t}&_limit=${r}`);return{winners:yield i.json(),total:i.headers.get("X-Total-Count")}}))}getWinner(e,n,t,r){return b(this,void 0,void 0,(function*(){const i=yield fetch(`${e}${n}/${r}`,{method:t});return yield i.json()}))}createWinner(e,n,t,r,i){return b(this,void 0,void 0,(function*(){const a=yield fetch(`${e}${n}`,{method:t,body:r,headers:i});return yield a.json()}))}updateWinner(e,n,t,r,i,a){return b(this,void 0,void 0,(function*(){const o=yield fetch(`${e}${n}/${a}`,{method:t,body:r,headers:i});return yield o.json()}))}deleteWinner(e,n,t,r){return b(this,void 0,void 0,(function*(){const i=yield fetch(`${e}${n}/${t}`,{method:r});return yield i.json()}))}},y=class{static start(e,n){const t=document.getElementById(`car-item-${e}`),r=document.getElementById(`car-finish-${e}`);if(t&&r){const i=t.clientWidth,a=i-(i-r.offsetLeft+r.offsetWidth);this.animate(e,a,n)}}static animate(e,n,t){const r=document.getElementById(`car-image-${e}`);if(r){let i=r.offsetLeft;const a=(n-i)/(t/1e3*60),o=()=>{if(i+=a,r.style.transform=`translateX(${i}px)`,i<n){const n=requestAnimationFrame(o);m.savedState.animation[e]=n}};o()}}};var x;!function(e){e.Garage="/garage",e.Engine="/engine",e.Winners="/winners"}(x||(x={}));const S=class{static generateCarsData(){return this.getRandomCarsArr().map((e=>{const n={};return n.name=e,n.color=this.getRandomColor(),n}))}static getRandomInt(e,n){return Math.floor(Math.random()*(Math.floor(n)-Math.ceil(e)+1))+Math.ceil(e)}static getRandomElem(e){return e[this.getRandomInt(0,e.length-1)]}static getRandomColor(){let e="#";for(let n=0;n<6;n+=1)e+=this.getRandomElem("0123456789ABCDEF");return e}static getRandomCarsArr(){const e={Audi:["A1","A3","A4","A5","A6","A7","A8","e-tron GT","TT","R8"],VW:["Golf","Polo","Jetta","Passat","Tiguan","Beetle","Up","Caddy","Touran","Kaddy"],Kia:["Seed","Rio","K5","Optima","Soul","Sorento","Sportage","Picanto","K8"],Skoda:["Fabia","Rapid","Octavia","Superb","Karoq","Kodiaq","Roomster","Yeti"],Renault:["Arkana","Captur","Clio","Docker","Duster","Fluence","Kaptur","Logan"],Toyota:["Corolla","Camry","Auris","Avensis","Celica","IQ","Prius","Mark II","Supra"],Mazda:["3","6","323","626","CX-5","Tribute"],Mercedes:["C-class","E-class","S-class","CLA","AMG GT","GL","ML"],Citroen:["Picasso","Berlingo","C4","Xantia","Xsara"],Porshe:["911","Cayenne","Spyder","Carrera GT","Panamera","Boxster"]},n=Object.keys(e),t=[];for(let r=0;r<100;r+=1){const r=this.getRandomElem(n),i=this.getRandomElem(e[r]);t.push(`${r} ${i}`)}return t}},C=class{static createCarWinnerMatch(){const{cars:e}=m.savedState,{winners:n}=m.savedState;n.forEach((n=>{if(null==n?void 0:n.id){const t=e.filter((e=>(null==e?void 0:e.id)===(null==n?void 0:n.id))),r=t[0];r&&(m.savedState.winnersFullDetails[n.id]=[r.name,r.color,n.wins,n.time])}}))}};var $=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{d(r.next(e))}catch(e){a(e)}}function s(e){try{d(r.throw(e))}catch(e){a(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}d((r=r.apply(e,n||[])).next())}))};const E=class{constructor(){this.getWinners=()=>$(this,void 0,void 0,(function*(){const e=x.Winners,n=m.savedState.pageLimitWinners,t=m.savedState.pageNumWinners,{winners:r,total:i}=yield this.model.getWinners("http://127.0.0.1:3000",e,t,n),a=[...yield r];m.savedState.winners=a,C.createCarWinnerMatch(),i&&(m.savedState.totalWinners=+i)})),this.createWinner=(e,n,t)=>$(this,void 0,void 0,(function*(){const r=+e,i=m.savedState.duration[e]/1e3;let{wins:a,time:o}=yield this.hasWonBefore(e);if(a)console.log("existing winner"),a+=1,o=o<i?o:i,this.updateWinner(e,a,o);else{console.log("first win"),a=1;const e={id:r,wins:a,time:i},n="http://127.0.0.1:3000",t=x.Winners,o=JSON.stringify(e),s="POST",d={"Content-Type":"application/json"};yield this.model.createWinner(n,t,s,o,d),console.log("winner created")}m.savedState.winnersFullDetails[e]=[n,t,a,i]})),this.deleteWinner=e=>$(this,void 0,void 0,(function*(){const n=x.Winners;yield this.model.deleteWinner("http://127.0.0.1:3000",n,e,"DELETE"),delete m.savedState.winnersFullDetails[e],console.log("deleted from winners as well")})),this.hasWonBefore=e=>$(this,void 0,void 0,(function*(){const n=x.Winners;return yield this.model.getWinner("http://127.0.0.1:3000",n,"GET",e)})),this.updateWinner=(e,n,t)=>$(this,void 0,void 0,(function*(){const r={wins:n,time:t},i=x.Winners,a=JSON.stringify(r),o=e;yield this.model.updateWinner("http://127.0.0.1:3000",i,"PUT",a,{"Content-Type":"application/json"},o),console.log("winner updated")})),this.winners=new class{render(){const e=document.querySelector(".main");e&&(e.innerHTML+=this.renderMain(m.savedState))}clearWinners(){const e=document.querySelector(".main"),n=document.querySelector(".winners-wrapper");e&&n&&e.removeChild(n)}renderMain(e){return`<div class="winners-wrapper hidden">\n    <h2 class="page-title">Winners</h2>\n    ${this.renderTable(e)}\n  </div>`}renderCarImage(e,n){return`<svg class="winners-car-image" id="winners-car-image-${n}" xmlns="http://www.w3.org/2000/svg" width="50" height="30" fill="none">\n    <path fill=${e} d="M46.673 15.304c.506 0 .914.483.938 1.087-.465-.323-1.016-.555-1.614-.743a.879.879 0 0 1 .676-.344ZM21.189 22.23c1.488 0 2.697 1.2 2.697 2.672 0 1.474-1.209 2.672-2.697 2.672-1.497 0-2.714-1.198-2.714-2.672.001-1.472 1.217-2.672 2.714-2.672Zm-.005 3.8a1.128 1.128 0 1 0 0-2.258c-.63 0-1.139.501-1.139 1.13 0 .619.509 1.128 1.139 1.128ZM41.277 22.482c1.485 0 2.695 1.2 2.695 2.672 0 1.474-1.21 2.672-2.695 2.672-.732 0-1.417-.28-1.929-.792a2.632 2.632 0 0 1-.788-1.88c0-.713.279-1.382.786-1.883a2.713 2.713 0 0 1 1.931-.79Zm-.006 3.8a1.127 1.127 0 1 0 0-2.253c-.631-.001-1.138.5-1.138 1.125 0 .62.507 1.127 1.138 1.127Z" />\n      <path fill=${e} d="M41.277 21.427a3.729 3.729 0 1 1-2.642 6.366 3.694 3.694 0 0 1-1.1-2.64c0-1.006.391-1.944 1.1-2.648a3.752 3.752 0 0 1 2.642-1.078Zm-1.928 5.607a2.707 2.707 0 0 0 1.929.792c1.485 0 2.695-1.198 2.695-2.672 0-1.472-1.21-2.672-2.695-2.672-.735 0-1.42.279-1.93.79a2.628 2.628 0 0 0-.787 1.882c0 .71.28 1.375.788 1.88Z" />\n      <path fill=${e} d="M41.271 24.028a1.126 1.126 0 1 1 0 2.253 1.133 1.133 0 0 1-1.138-1.127c0-.624.507-1.126 1.138-1.126ZM10.251 17.287H4.568v.872h5.683v-.872ZM10.317 22.655H4.632v.872h5.685v-.872ZM10.317 19.792H.728V20.8h9.589v-1.007ZM21.19 21.173a3.731 3.731 0 0 1 3.723 3.729 3.73 3.73 0 0 1-7.463 0 3.74 3.74 0 0 1 3.74-3.729Zm0 6.401c1.487 0 2.696-1.198 2.696-2.672 0-1.472-1.209-2.672-2.697-2.672-1.497 0-2.714 1.2-2.714 2.672.001 1.474 1.217 2.672 2.714 2.672Z" />\n      <path fill=${e} d="M21.184 23.772c.626 0 1.132.501 1.132 1.13a1.136 1.136 0 0 1-2.27 0c-.001-.628.508-1.13 1.138-1.13ZM30.484 6.37v8.543h-1.359V6.292c.47.002.92.032 1.359.078Z" />\n      <path fill=${e} d="M29.125 5.799h1.359v.572a13.42 13.42 0 0 0-1.359-.078v-.494ZM30.484 15.874h-1.359v-.961h1.359v.96ZM47.61 16.391c-.023-.604-.432-1.087-.938-1.087a.882.882 0 0 0-.677.344 9.6 9.6 0 0 0-1.063-.262c.342-.684.987-1.155 1.74-1.155 1.095 0 1.986.99 1.986 2.209 0 .293-.055.578-.149.834a3.804 3.804 0 0 0-.899-.883Z" />\n      <path fill=${e} d="M46.673 18.649c-1.098 0-1.987-.99-1.987-2.21 0-.384.097-.739.248-1.052a9.65 9.65 0 0 1 1.063.262 1.245 1.245 0 0 0-.271.792c0 .623.423 1.136.947 1.136.52 0 .946-.512.946-1.136 0-.019-.008-.032-.01-.049.35.241.647.541.9.882-.297.807-1.006 1.375-1.836 1.375Z" />\n      <path fill=${e} d="M11.709 16.243c.276.27.658.435 1.076.435.847 0 1.531-.668 1.531-1.494 0-.68-.469-1.25-1.111-1.428.835-.805 1.95-1.297 3.378-1.278-1.299-3.868.546-6.598 5.558-8.165 3.21-.668 6.401-.872 9.59 0 5.596.985 9.35 4.407 10.845 10.76.818.07 1.614.168 2.358.315-.15.315-.248.668-.248 1.053 0 1.218.89 2.209 1.987 2.209.83 0 1.54-.568 1.838-1.375.06.08.13.15.186.237.253.578.433 1.13.575 1.669h-1.477v3.737h1.447c-.44 1.252-1.342 2.323-2.76 3.181h-.588c.023-.157.023-.336.023-.494 0-2.974-2.128-5.388-4.754-5.388-2.645 0-4.77 2.414-4.77 5.388 0 .157 0 .336.02.494H25.958c0-.157.02-.336.02-.494 0-2.974-2.146-5.388-4.77-5.388-2.626 0-4.753 2.414-4.753 5.388 0 .157 0 .336.021.494h-.998c-3.444.102-5.12-5.791-3.769-9.856Zm10.432-1.33h6.984v.96h1.359v-.96h8.903c-1.353-5.207-4.318-8.062-8.903-8.543v-.572h-1.359v.494c-.374 0-.756.01-1.148.036-4.451.268-6.488 3.423-5.836 8.585Z" />\n    </svg>`}renderRows(e){return e.map(((e,n)=>{let t,r,i,a;if(e){const n=m.savedState.winnersFullDetails[e.id];n&&([t,r,i,a]=n)}return`<tr>\n        <th>${n+1}</th>\n        <th>${this.renderCarImage(null==r?void 0:r.toString(),null==e?void 0:e.id)}</th>\n        <th>${t}, (id ${null==e?void 0:e.id})</th>\n        <th>${i}</th>\n        <th>${Number(a).toFixed(2)}</th>\n      </tr>`})).join("")}renderTable(e){return`<table class="winners-table">\n    <thead>\n      <th>№</th>\n      <th>Car</th>\n      <th>Name</th>\n      <th>Wins</th>\n      <th>Time, sec</th>\n    </thead>\n    <tbody>\n    ${this.renderRows(e.winners)}\n    </tbody>\n  </table>`}},this.model=new w}run(){return $(this,void 0,void 0,(function*(){this.winners.render()}))}rerenderWinners(){this.winners.clearWinners(),this.winners.render();const e=document.querySelector(".garage-wrapper"),n=document.querySelector(".winners-wrapper");e&&n&&(e.classList.add("hidden"),n.classList.remove("hidden"))}};var B=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{d(r.next(e))}catch(e){a(e)}}function s(e){try{d(r.throw(e))}catch(e){a(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}d((r=r.apply(e,n||[])).next())}))};const P=class{constructor(){this.getCars=()=>B(this,void 0,void 0,(function*(){const e=x.Garage,n=m.savedState.pageLimitGarage,t=m.savedState.pageNumGarage,{cars:r,total:i}=yield this.model.getGarage("http://127.0.0.1:3000",e,t,n),a=[...yield r];m.savedState.cars=a,i&&(m.savedState.totalCars=+i)})),this.createCar=()=>B(this,void 0,void 0,(function*(){const e=document.querySelector("#create-name");let n="";e&&(n=e.value);const t=document.querySelector("#create-color");let r="#55ff5c";t&&(r=t.value);const i={name:n,color:r},a=x.Garage,o=JSON.stringify(i);yield this.model.createCar("http://127.0.0.1:3000",a,"POST",o,{"Content-Type":"application/json"}),this.garage.clearGaragePage(),this.run(),m.isLastPage("garage")||this.enableBtn("next")})),this.updateCar=()=>B(this,void 0,void 0,(function*(){const{id:e}=m.savedState,n=document.querySelector("#update-name");let t="";n&&(t=n.value);const r=document.querySelector("#update-color");let i="#55ff5c";r&&(i=r.value);const a={name:t,color:i},o=x.Garage,s=JSON.stringify(a);yield this.model.updateCar("http://127.0.0.1:3000",o,e,"PUT",s,{"Content-Type":"application/json"}),this.garage.clearGaragePage(),this.run()})),this.deleteCar=e=>B(this,void 0,void 0,(function*(){const n=this.rememberId(e),t=x.Garage;yield this.model.deleteCar("http://127.0.0.1:3000",t,n,"DELETE"),yield this.winnersController.deleteWinner(n),this.garage.clearGaragePage(),this.run(),m.isLastPage("garage")?this.disableBtn("next"):this.enableBtn("next")})),this.startCar=(e,n)=>B(this,void 0,void 0,(function*(){var t;const r=null!==(t=this.rememberId(e))&&void 0!==t?t:null==n?void 0:n.toString();if(r){this.handleStopBtn(r,"enable"),this.handleDriveBtn(r,"disable");const e="http://127.0.0.1:3000",n=x.Engine,t="started",i="PATCH",{velocity:a,distance:o}=yield this.model.startStopCar(e,n,r,t,i),s=o/a;this.switchEngine(r).catch(console.log),y.start(r,s)}})),this.switchEngine=e=>B(this,void 0,void 0,(function*(){const n=x.Engine,t=new AbortController,{signal:r}=t;m.savedState.controller[e]=t;const i=yield this.model.switchEngine("http://127.0.0.1:3000",n,e,"drive","PATCH",r);if(i.success||cancelAnimationFrame(m.savedState.animation[e]),i.success&&m.savedState.race&&!m.savedState.winnerFound){const n=m.savedState.cars.filter((n=>(null==n?void 0:n.id)===+e))[0];n&&(m.savedState.winnersFullDetails[e]=[n.name,n.color],this.showWinnerPopup(n.name,e),setTimeout((()=>this.hideWinnerPopup()),5e3),this.redirectToWinners(e,n.name,n.color)),m.savedState.winnerFound=!0}})),this.stopCar=e=>B(this,void 0,void 0,(function*(){const n=this.rememberId(e),t=x.Engine;yield this.model.startStopCar("http://127.0.0.1:3000",t,n,"stopped","PATCH"),m.savedState.controller[n].abort(),this.handleDriveBtn(n,"enable"),this.handleStopBtn(n,"disable"),cancelAnimationFrame(m.savedState.animation[n]),this.garage.setCarInitialPosition(n)})),this.generateCars=()=>B(this,void 0,void 0,(function*(){const e=S.generateCarsData(),n=x.Garage,t={"Content-Type":"application/json"},r=e.map((e=>B(this,void 0,void 0,(function*(){const r=JSON.stringify(e);yield this.model.createCar("http://127.0.0.1:3000",n,"POST",r,t)}))));return this.garage.clearGaragePage(),this.run(),this.enableBtn("next"),r})),this.raceAll=()=>B(this,void 0,void 0,(function*(){m.savedState.race=!0,this.disableBtn("race"),this.disableBtn("generate"),this.enableBtn("reset"),this.disableBtn("previous"),this.disableBtn("next");const e=x.Engine,n=m.savedState.cars.map((e=>null==e?void 0:e.id.toString())),t=n.map((n=>B(this,void 0,void 0,(function*(){if(!n)throw new Error("no id");const{velocity:t,distance:r}=yield this.model.startStopCar("http://127.0.0.1:3000",e,n,"started","PATCH");return{velocity:t,distance:r}})))),r=(yield Promise.all(t)).map((e=>e.distance/e.velocity));n.forEach(((e,n)=>{e&&(this.handleDriveBtn(e,"disable"),this.switchEngine(e).catch(console.log),y.start(e,r[n]),m.savedState.duration[e]=r[n])}))})),this.resetRace=()=>B(this,void 0,void 0,(function*(){this.disableBtn("reset"),this.enableBtn("race"),this.enableBtn("generate"),1!==m.savedState.pageNumGarage&&this.enableBtn("previous"),m.isLastPage("garage")||this.enableBtn("next"),m.savedState.cars.map((e=>null==e?void 0:e.id.toString())).forEach((e=>B(this,void 0,void 0,(function*(){if(e){if(m.savedState.race){const n="http://127.0.0.1:3000",t=x.Engine,r="stopped",i="PATCH";yield this.model.startStopCar(n,t,e,r,i),m.savedState.controller[e].abort(),cancelAnimationFrame(m.savedState.animation[e])}this.garage.setCarInitialPosition(e),this.handleDriveBtn(e,"enable")}})))),m.savedState.race=!1,m.savedState.winnerFound=!1})),this.garage=new class{render(){const e=document.querySelector(".main");e&&(e.innerHTML+=this.renderMain(m.savedState))}clearGaragePage(){const e=document.querySelector(".main"),n=document.querySelector(".garage-wrapper");e&&n&&e.removeChild(n)}setCarInitialPosition(e){const n=document.getElementById(`car-image-${e}`);n&&(n.style.transform="translateX(0)")}renderMain(e){return`<div class="garage-wrapper">\n    ${this.renderHeader()}\n    <div class="race-wrapper">\n      ${this.renderButton("race")}\n      ${this.renderButton("reset")}\n      <button class="generate-btn">Generate cars</button>\n    </div>\n\n    ${this.renderWinnerPopUp()}\n    <div class="cars-wrapper">\n      <h2 class="page-title">Garage<span class="total-cars"> (${e.totalCars})</span></h2>\n      <ul class="cars-list">\n        ${this.renderCarTracks(e.cars)}\n      </ul>\n    </div>\n  </div>`}renderCarEditControls(e){return`<div class="edit-car">\n    <input class="garage-input" type="text" name="${e}-input" id="${e}-name">\n    <input class="garage-input color-input" type="color" name="color-input" id="${e}-color" value="#55ff5c">\n    <button class="edit-btn ${e}-btn">${e}</button>\n  </div>`}renderHeader(){return`<div class="edit-wrapper">\n    ${this.renderCarEditControls("create")}\n    ${this.renderCarEditControls("update")}\n  </div>`}renderButton(e,n){return`<button class="${e}-btn" id="${e}-btn-${n}">${e}</button>`}renderCarImage(e,n){return`<div class="car-image" id="car-image-${n}">\n    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="60" fill="none">\n      <path fill=${e} d="M93.346 30.607c1.012 0 1.828.967 1.876 2.175-.93-.647-2.032-1.11-3.228-1.486.34-.419.822-.689 1.352-.689ZM42.378 44.46c2.976 0 5.394 2.4 5.394 5.344 0 2.948-2.418 5.344-5.394 5.344-2.994 0-5.428-2.396-5.428-5.344.002-2.944 2.434-5.344 5.428-5.344Zm-.01 7.6a2.264 2.264 0 0 0 2.264-2.256 2.256 2.256 0 0 0-2.264-2.26 2.261 2.261 0 0 0-2.278 2.26c0 1.237 1.018 2.256 2.278 2.256ZM82.554 44.963c2.97 0 5.39 2.4 5.39 5.344 0 2.948-2.42 5.344-5.39 5.344a5.408 5.408 0 0 1-3.858-1.583 5.264 5.264 0 0 1-1.576-3.761c0-1.425.558-2.763 1.572-3.765a5.426 5.426 0 0 1 3.862-1.579Zm-.012 7.6a2.261 2.261 0 0 0 2.262-2.256 2.254 2.254 0 0 0-2.262-2.251 2.257 2.257 0 0 0-2.276 2.251 2.266 2.266 0 0 0 2.276 2.256Z"/>\n      <path fill=${e} d="M82.554 42.854c4.106 0 7.442 3.342 7.442 7.453 0 4.115-3.336 7.461-7.442 7.461a7.418 7.418 0 0 1-5.284-2.183 7.388 7.388 0 0 1-2.202-5.28c0-2.01.784-3.887 2.202-5.294a7.505 7.505 0 0 1 5.284-2.157Zm-3.856 11.214a5.413 5.413 0 0 0 3.858 1.583c2.97 0 5.39-2.395 5.39-5.344 0-2.944-2.42-5.344-5.39-5.344-1.47 0-2.84.56-3.862 1.58a5.256 5.256 0 0 0-1.572 3.764c0 1.423.56 2.75 1.576 3.761Z"/>\n      <path fill=${e} d="M82.542 48.056a2.252 2.252 0 1 1 0 4.507 2.265 2.265 0 0 1-2.276-2.256 2.258 2.258 0 0 1 2.276-2.251ZM20.502 34.574H9.136v1.744h11.366v-1.744ZM20.634 45.31H9.264v1.744h11.37V45.31ZM20.634 39.584H1.456v2.014h19.178v-2.014ZM42.378 42.347c4.106 0 7.448 3.346 7.448 7.457 0 4.107-3.342 7.453-7.448 7.453-4.122 0-7.478-3.346-7.478-7.453 0-4.111 3.358-7.457 7.478-7.457Zm0 12.801c2.976 0 5.394-2.396 5.394-5.344 0-2.944-2.418-5.344-5.394-5.344-2.994 0-5.428 2.4-5.428 5.344.002 2.948 2.434 5.344 5.428 5.344Z"/>\n      <path fill=${e} d="M42.368 47.544a2.254 2.254 0 0 1 2.264 2.26 2.264 2.264 0 0 1-2.264 2.255c-1.26 0-2.278-1.018-2.278-2.255a2.263 2.263 0 0 1 2.278-2.26ZM60.968 12.74v17.086H58.25V12.584c.94.004 1.84.063 2.718.156Z"/>\n      <path fill=${e} d="M58.25 11.598h2.718v1.144a26.805 26.805 0 0 0-2.718-.157v-.987ZM60.968 31.747H58.25v-1.921h2.718v1.921ZM95.22 32.782c-.046-1.208-.864-2.175-1.876-2.175-.53 0-1.012.27-1.354.689a19.2 19.2 0 0 0-2.126-.524c.684-1.369 1.974-2.311 3.478-2.311 2.192 0 3.974 1.981 3.974 4.418 0 .588-.11 1.157-.298 1.668a7.61 7.61 0 0 0-1.798-1.764Z"/>\n      <path fill=${e} d="M93.346 37.298c-2.196 0-3.974-1.982-3.974-4.419 0-.769.194-1.478.496-2.105.736.145 1.452.31 2.126.524a2.491 2.491 0 0 0-.542 1.583c0 1.248.846 2.272 1.894 2.272 1.042 0 1.892-1.023 1.892-2.272 0-.037-.016-.064-.018-.097a7.725 7.725 0 0 1 1.8 1.763c-.596 1.614-2.014 2.75-3.674 2.75Z"/>\n      <path fill=${e} d="M23.418 32.486a3.07 3.07 0 0 0 2.152.87c1.694 0 3.062-1.337 3.062-2.988 0-1.36-.938-2.5-2.222-2.856 1.67-1.61 3.9-2.593 6.756-2.556-2.598-7.736 1.092-13.195 11.116-16.33 6.42-1.335 12.802-1.743 19.178 0 11.194 1.97 18.7 8.815 21.692 21.521 1.636.14 3.228.334 4.716.63a4.841 4.841 0 0 0-.496 2.104c0 2.437 1.78 4.419 3.974 4.419 1.66 0 3.078-1.136 3.676-2.75.12.16.26.3.372.474.506 1.156.866 2.26 1.15 3.337H95.59v7.474h2.894c-.88 2.505-2.683 4.648-5.52 6.363H91.79c.046-.313.046-.672.046-.988 0-5.948-4.256-10.776-9.508-10.776-5.29 0-9.543 4.828-9.543 10.776 0 .314 0 .672.042.988h-20.91c0-.313.04-.672.04-.988 0-5.948-4.291-10.776-9.541-10.776S32.91 45.262 32.91 51.21c0 .314 0 .672.043.988h-1.996c-6.889.204-10.24-11.583-7.538-19.712h-.001Zm20.864-2.66H58.25v1.921h2.718v-1.921h17.806c-2.706-10.414-8.636-16.123-17.806-17.086v-1.144H58.25v.988c-.748 0-1.512.02-2.296.072-8.902.535-12.976 6.847-11.672 17.17Z"/></svg>\n  </div>`}renderCarTracks(e){return e.map((e=>`<li class="car-item" id="car-item-${null==e?void 0:e.id}">\n    <div class="car-header">\n      <div class="car-selection">\n        ${this.renderButton("select",null==e?void 0:e.id)}\n        ${this.renderButton("remove",null==e?void 0:e.id)}\n      </div>\n      <p class="car-name">${null==e?void 0:e.name}</p>\n    </div>\n    <div class="car-body">\n      <div class="car-drive-controls">\n        <button class="drive-btn" id="drive-btn-${null==e?void 0:e.id}">D</button>\n        <button class="stop-btn" id="stop-btn-${null==e?void 0:e.id}">S</button>\n      </div>\n      ${this.renderCarImage(null==e?void 0:e.color,null==e?void 0:e.id)}\n      <div class="finish" id="car-finish-${null==e?void 0:e.id}">\n        <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="none"><path fill="currentColor" d="M23.39.672c-5.794.432-11.455 2.543-15.966 5.962-.995.743-1.187.851-1.235.671-.036-.12-.228-.648-.444-1.175-.48-1.176-.851-1.476-1.631-1.26-.576.156-.852.504-.852 1.092 0 .6-.42-.588 15.534 43.877 1.679 4.702 3.142 8.708 3.25 8.9.564 1.103 2.207.744 2.207-.48 0-.312-.971-3.179-2.927-8.637L18.4 41.454l.624-.564c2.015-1.823 5.277-3.802 7.557-4.594 1.715-.6 2.89-.756 4.99-.684 2.183.084 4.21.408 6.465 1.043 4.078 1.152 5.134 1.344 7.509 1.332 2.615 0 4.714-.36 7.437-1.284 1.667-.552 3.167-1.247 3.478-1.607.24-.264.24-.456.276-16.853.012-10.46-.012-16.709-.084-16.9-.276-.708-1.295-.924-1.98-.409-1.835 1.38-4.546 2.891-6.512 3.646-1.368.516-3.131.888-4.535.96-2.338.132-4.09-.384-8.696-2.543C30.611.984 27.564.372 23.389.672Zm3.79 2.495c.06.108 2.47 9.116 2.47 9.248 0 .036-.72.06-1.583.036a24.751 24.751 0 0 0-5.385.456c-1.224.24-3.802.912-4.054 1.068-.108.072.372 1.439 1.895 5.35 1.127 2.878 2.051 5.3 2.051 5.385-.012.072-.647.444-1.427.815-1.631.792-3.49 1.992-5.278 3.431-.684.552-1.308 1.031-1.38 1.055-.084.036-.947-2.219-2.146-5.553l-2.016-5.614.396-.336c1.404-1.187 3.97-2.759 6.238-3.814.78-.36 1.415-.707 1.415-.78 0-.071-.755-2.063-1.68-4.426-.923-2.374-1.643-4.342-1.583-4.39.132-.12 1.716-.672 2.915-1.007 1.296-.372 2.639-.636 4.186-.84 1.296-.168 4.87-.228 4.966-.084Zm9.92 3.515c1.38.564 2.59.935 3.695 1.127 1.271.228 3.502.228 4.75 0 .528-.096 1.02-.18 1.091-.18.072 0 .252 1.595.468 4.402.192 2.435.36 4.438.372 4.462.024.024.54-.132 1.152-.348 1.247-.432 3.442-1.499 4.714-2.278.468-.276.875-.528.935-.564.048-.024.084 2.326.084 5.23v5.29l-.564.287c-.875.432-3.083 1.224-4.342 1.56-.612.168-1.14.324-1.175.348-.024.024.12 2.087.324 4.57.204 2.495.336 4.57.3 4.618-.192.312-4.595.456-5.818.18-.288-.06-.336-.216-1.355-4.69-.576-2.543-1.02-4.654-.996-4.69.036-.036.732.036 1.536.144.815.108 1.907.192 2.434.192.9 0 3.37-.276 3.479-.384.048-.048-.672-9.236-.732-9.308-.012-.024-.576.048-1.247.168-2.315.384-4.69.096-7.065-.84-.432-.167-.78-.3-.804-.275-.012.012.492 2.278 1.115 5.037.636 2.759 1.116 5.038 1.092 5.074-.036.024-1.056-.204-2.268-.528a126.247 126.247 0 0 0-3.646-.924c-.792-.168-1.547-.36-1.68-.42-.203-.072-.48-.971-1.715-5.65-.804-3.058-1.463-5.613-1.463-5.673.012-.396 3.095.576 6.273 1.968 1.2.528 2.183.935 2.195.923.024-.024-1.848-8.264-2.04-8.996-.024-.108-.036-.204-.012-.204.013 0 .421.168.913.372Zm-5.41 17.152c.552.072 1.02.132 1.044.144.012.012.563 2.076 1.235 4.583.66 2.506 1.235 4.63 1.26 4.726.06.132-.06.156-.625.084-3.118-.36-5.565-.3-7.437.18-.552.144-1.031.228-1.067.192-.18-.18-3.395-8.9-3.323-8.973.144-.144 3.299-.935 4.222-1.055.877-.12 3.096-.06 4.691.12Z"/></svg>\n      </div>\n    </div>\n  </li>`)).join("")}renderWinnerPopUp(){return'<div class="winner-popup hidden">\n    <div class="winner-text"></div>\n  </div>'}},this.model=new w,this.view=new v,this.winnersController=new E}run(){return B(this,void 0,void 0,(function*(){this.garage.clearGaragePage(),yield this.getCars(),this.garage.render(),this.disableUpdate(),this.disableBtns(),this.listenButtons()}))}listenButtons(){this.listenEditBtns(),this.listenRaceBtns(),this.listenDriveControls();const e=document.querySelectorAll(".select-btn");null==e||e.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.rememberId(e),this.enableUpdate()}))}));const n=document.querySelectorAll(".remove-btn");null==n||n.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.deleteCar(e)}))}))}disableUpdate(){const e={updateBtn:document.querySelector(".update-btn"),updateInput:document.querySelector("#update-name"),updateColor:document.querySelector("#update-color")};Object.values(e).forEach((e=>null==e?void 0:e.setAttribute("disabled","disabled")))}enableUpdate(){const e={updateBtn:document.querySelector(".update-btn"),updateInput:document.querySelector("#update-name"),updateColor:document.querySelector("#update-color")},n=m.savedState.cars.filter((e=>(null==e?void 0:e.id)===+m.savedState.id))[0];if(n){const{name:t,color:r}=n;e.updateInput instanceof HTMLInputElement&&(e.updateInput.value=t),e.updateColor instanceof HTMLInputElement&&(e.updateColor.value=r)}Object.values(e).forEach((e=>null==e?void 0:e.removeAttribute("disabled")))}disableBtn(e){const n=document.querySelector(`.${e}-btn`);null==n||n.setAttribute("disabled","disabled")}enableBtn(e){const n=document.querySelector(`.${e}-btn`);null==n||n.removeAttribute("disabled")}disableBtns(){this.disableBtn("reset");const e=document.querySelectorAll(".stop-btn");null==e||e.forEach((e=>null==e?void 0:e.setAttribute("disabled","disabled")))}handleStopBtn(e,n){const t=document.getElementById(`stop-btn-${e}`);"enable"===n&&(null==t||t.removeAttribute("disabled")),"disable"===n&&(null==t||t.setAttribute("disabled","disabled"))}handleDriveBtn(e,n){const t=document.getElementById(`drive-btn-${e}`);"enable"===n&&(null==t||t.removeAttribute("disabled")),"disable"===n&&(null==t||t.setAttribute("disabled","disabled"))}listenEditBtns(){var e,n;const t={createBtn:document.querySelector(".create-btn"),updateBtn:document.querySelector(".update-btn")};null===(e=t.createBtn)||void 0===e||e.addEventListener("click",this.createCar),null===(n=t.updateBtn)||void 0===n||n.addEventListener("click",this.updateCar)}listenRaceBtns(){var e,n,t;const r={raceBtn:document.querySelector(".race-btn"),resetBtn:document.querySelector(".reset-btn"),generateBtn:document.querySelector(".generate-btn")};null===(e=r.raceBtn)||void 0===e||e.addEventListener("click",this.raceAll),null===(n=r.resetBtn)||void 0===n||n.addEventListener("click",this.resetRace),null===(t=r.generateBtn)||void 0===t||t.addEventListener("click",this.generateCars)}listenDriveControls(){const e=document.querySelectorAll(".drive-btn");null==e||e.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.startCar(e)}))}));const n=document.querySelectorAll(".stop-btn");null==n||n.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.stopCar(e)}))}))}rememberId(e){let n="";if((null==e?void 0:e.target)instanceof HTMLElement){const t=e.target.id.split("-");n=t[t.length-1]}return m.savedState.id=n,n}showWinnerPopup(e,n){const t=document.querySelector(".winner-popup"),r=document.querySelector(".winner-text");t&&r&&(t.classList.remove("hidden"),r.textContent=`Car ${e} (id ${n}) won the race!`)}hideWinnerPopup(){const e=document.querySelector(".winner-popup"),n=document.querySelector(".winner-text");e&&n&&(e.classList.add("hidden"),n.textContent="")}redirectToWinners(e,n,t){this.winnersController.createWinner(e,n,t)}};var M=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{d(r.next(e))}catch(e){a(e)}}function s(e){try{d(r.throw(e))}catch(e){a(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}d((r=r.apply(e,n||[])).next())}))};var k=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{d(r.next(e))}catch(e){a(e)}}function s(e){try{d(r.throw(e))}catch(e){a(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}d((r=r.apply(e,n||[])).next())}))};(new class{constructor(){this.controller=new class{constructor(){this.view=new v,this.garage=new P,this.winners=new E,this.pagination=new class{constructor(){this.view=new v,this.garage=new P,this.winners=new E}refreshPagination(e){const n=document.querySelector(".pagination");n&&(n.innerHTML="",n.innerHTML=this.view.renderPagination(e)),this.handlePagination(e)}handlePagination(e){var n,t,r,i,a,o,s,d;return M(this,void 0,void 0,(function*(){yield this.garage.getCars();const l={previousBtn:document.querySelector(".previous-btn"),curPage:document.querySelector(".current-page"),nextBtn:document.querySelector(".next-btn")};l.curPage&&("garage"===e?(l.curPage.textContent=m.savedState.pageNumGarage.toString(),m.savedState.pageNumGarage>1?null===(n=l.previousBtn)||void 0===n||n.removeAttribute("disabled"):null===(t=l.previousBtn)||void 0===t||t.setAttribute("disabled","disabled")):(l.curPage.textContent=m.savedState.pageNumWinners.toString(),m.savedState.pageNumWinners>1?null===(r=l.previousBtn)||void 0===r||r.removeAttribute("disabled"):null===(i=l.previousBtn)||void 0===i||i.setAttribute("disabled","disabled")),m.isLastPage(e)?null===(a=l.nextBtn)||void 0===a||a.setAttribute("disabled","disabled"):null===(o=l.nextBtn)||void 0===o||o.removeAttribute("disabled")),null===(s=l.nextBtn)||void 0===s||s.addEventListener("click",(()=>{this.switchToNextPage(e)})),null===(d=l.previousBtn)||void 0===d||d.addEventListener("click",(()=>{this.switchToPreviousPage(e)}))}))}switchToNextPage(e){return M(this,void 0,void 0,(function*(){"garage"===e?(m.savedState.pageNumGarage+=1,yield this.garage.run(),this.refreshPagination(e)):(m.savedState.pageNumWinners+=1,yield this.winners.run(),this.refreshPagination(e),this.winners.rerenderWinners())}))}switchToPreviousPage(e){return M(this,void 0,void 0,(function*(){"garage"===e?(m.savedState.pageNumGarage-=1,yield this.garage.run(),this.refreshPagination(e)):(m.savedState.pageNumWinners-=1,yield this.winners.run(),this.refreshPagination(e),this.winners.rerenderWinners())}))}}}run(){return k(this,void 0,void 0,(function*(){this.view.render(),this.listenNav(),yield this.garage.getCars(),yield this.winners.getWinners(),this.garage.run(),this.winners.run(),this.pagination.refreshPagination(m.savedState.page)}))}listenNav(){document.querySelectorAll(".nav-item").forEach((e=>{e.addEventListener("click",(n=>{var t;this.changeView(n),null===(t=document.querySelector(".nav-item-active"))||void 0===t||t.classList.remove("nav-item-active"),e.classList.add("nav-item-active")}))}))}changeView(e){return k(this,void 0,void 0,(function*(){const n=document.querySelector(".garage-wrapper"),t=document.querySelector(".winners-wrapper");n&&t&&e.target instanceof HTMLLIElement&&("garage"===e.target.innerText.toLowerCase()?(t.classList.add("hidden"),n.classList.remove("hidden"),m.savedState.page="garage",this.garage.run(),this.pagination.refreshPagination("garage")):(yield this.winners.getWinners(),this.winners.rerenderWinners(),n.classList.add("hidden"),t.classList.remove("hidden"),m.savedState.page="winners",this.pagination.refreshPagination("winners")))}))}}}start(){try{this.controller.run()}catch(e){e instanceof Error&&console.log("Error",e.toString())}}}).start()})()})();