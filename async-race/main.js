(()=>{"use strict";var e={800:(e,t,n)=>{n.d(t,{Z:()=>B});var a=n(81),r=n.n(a),i=n(645),o=n.n(i),s=n(972),d=n(667),c=n.n(d),l=new URL(n(275),n.b),u=new URL(n(663),n.b),p=new URL(n(201),n.b),h=new URL(n(93),n.b),g=new URL(n(210),n.b),m=new URL(n(767),n.b),f=new URL(n(935),n.b),v=o()(r());v.i(s.Z);var b=c()(l),x=c()(u),y=c()(p),w=c()(h),S=c()(g),C=c()(m),E=c()(f);v.push([e.id,'@font-face{font-family:"Inter";src:url('+b+') format("woff2"),url('+x+') format("woff");font-weight:normal;font-style:normal;font-display:swap}@font-face{font-family:"Inter";src:url('+y+') format("woff2"),url('+w+') format("woff");font-weight:600;font-style:normal;font-display:swap}@font-face{font-family:"Inter";src:url('+S+') format("woff2"),url('+C+') format("woff");font-weight:bold;font-style:normal;font-display:swap}*{box-sizing:border-box;margin:0}html{scroll-behavior:smooth}body{min-height:100vh;font-family:"Inter",serif;font-weight:400;font-size:16px;color:#fff;background-image:url('+E+");background-size:cover}ul{margin:0;padding:0;list-style:none}button{cursor:pointer;padding:4px 36px;font-size:18px;font-weight:600;line-height:24px;text-transform:capitalize;color:#19192e;background-color:#55ff5c;border:none;border-radius:4px;box-shadow:2px 2px 4px #19192e,6px 6px 30px #141414}@media(max-width: 600px){button{font-size:16px}}button:hover{background-color:#40bf45;transition:ease-in-out .3s}button:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}button:disabled:hover{cursor:default;background-color:rgba(37,36,50,.4)}button:active{box-shadow:none}h1,h2,h3,p{margin:0}.hidden{display:none}.container{padding:0 24px}.header{margin-top:16px;margin-bottom:32px}.nav-list{display:flex;gap:36px}.nav-item{padding:8px 16px;font-weight:800;text-transform:uppercase}.nav-item:hover{cursor:pointer}.nav-item-active{color:#55ff5c;border-bottom:2px solid #55ff5c}.main{position:relative;margin-bottom:32px}footer{margin-bottom:32px}.edit-wrapper{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}.edit-car{display:flex;gap:8px}.garage-input{padding:9px 8px;line-height:24px;color:#19192e;color-scheme:dark;color:#55ff5c;background-color:rgba(0,0,0,0);border:2px solid #55ff5c;border-radius:4px}.garage-input:focus{background-color:#3b5f4f;outline-color:#55ff5c}@media(max-width: 600px){.garage-input[type=text]{width:232px}}.color-input{padding:2px;height:44px}.color-input:hover{cursor:pointer}.garage-input:disabled,.color-input:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878}.edit-btn{width:140px;color:#40bf45;background-color:rgba(0,0,0,0);border:2px solid #40bf45}@media(max-width: 600px){.edit-btn{width:126px}}.edit-btn:hover{background-color:#3b5f4f}.race-wrapper{display:flex;gap:10px;margin-bottom:32px}.race-wrapper button{padding:4px 34px}.race-wrapper button.race-btn:disabled{width:111px}.reset-btn{color:#ff7070;background:rgba(255,112,112,.1019607843);border:2px solid #ff7070}.reset-btn:hover{background-color:rgba(0,0,0,0)}.generate-btn{margin-left:4px}@media(max-width: 600px){.generate-btn{margin-left:0}}.generate-btn:disabled{margin-left:0}@media(max-width: 600px){.generate-btn:disabled{padding:4px 31px}}.generate-btn:hover{background-color:#40bf45}.winner-popup{position:absolute;width:40%;height:200px;left:50%;top:150px;transform:translateX(-50%);text-align:center}@media(max-width: 720px){.winner-popup{width:50%}}@media(max-width: 600px){.winner-popup{left:70%;top:170px}}.winner-text{margin:20px auto;font-size:36px;color:#55ff5c}@media(max-width: 1000px){.winner-text{font-size:24px}}@media(max-width: 600px){.winner-text{font-size:16px;font-weight:600}}.page-title{margin-bottom:24px}.cars-list{display:flex;flex-direction:column;gap:12px;margin-bottom:32px}.car-item{display:flex;flex-direction:column;gap:12px;border-bottom:4px dashed #fff}.car-item button{padding:2px 16px;font-size:14px}.car-header{display:flex;gap:24px;align-items:center}.car-selection{display:flex;gap:4px;align-items:center}button.remove-btn{align-self:center;padding-top:0;height:28px;color:#ff7070;background:rgba(255,112,112,.1019607843);border:2px solid #ff7070}button.remove-btn:hover{background-color:rgba(0,0,0,0)}.car-name{font-weight:600}.car-body{position:relative;display:flex;gap:24px}@media(max-width: 720px){.car-body{gap:12px}}@media(max-width: 600px){.car-body{gap:6px}}.car-drive-controls button{padding:2px;width:40px;color:#55ff5c;border:2px solid #55ff5c}button.drive-btn{background:rgba(0,0,0,0)}button.drive-btn:hover{color:#40bf45;background-color:#3b5f4f;border:2px solid #40bf45}button.drive-btn:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}button.stop-btn{color:#ff7070;background:rgba(255,112,112,.1019607843);border:2px solid #ff7070}button.stop-btn:hover{color:#ff4a4a;background:rgba(0,0,0,0);border:2px solid #ff4a4a}button.stop-btn:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}.car-image{width:100px;height:60px}.finish{position:absolute;right:10%;width:60px;height:60px}@media(max-width: 600px){.finish{right:15%}}.pagination{display:flex;align-items:center;gap:12px}.pagination button{padding:0;width:80px;font-size:12px;color:#40bf45;background:rgba(0,0,0,0);border:2px solid #40bf45}.pagination button:hover{background-color:#3b5f4f}.pagination button:disabled{cursor:default;color:#787878;background-color:rgba(37,36,50,.4);border:2px solid #787878;box-shadow:none}",""]);const B=v},972:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(81),r=n.n(a),i=n(645),o=n.n(i)()(r());o.push([e.id,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n',""]);const s=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(a)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(o[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);a&&o[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var i={},o=[],s=0;s<e.length;s++){var d=e[s],c=a.base?d[0]+a.base:d[0],l=i[c]||0,u="".concat(c," ").concat(l);i[c]=l+1;var p=n(u),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var g=r(h,a);a.byIndex=s,t.splice(s,0,{identifier:u,updater:g,references:1})}o.push(u)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=a(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);t[s].references--}for(var d=a(e,r),c=0;c<i.length;c++){var l=n(i[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=d}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},935:(e,t,n)=>{e.exports=n.p+"assets/images/bg.jpg"},767:(e,t,n)=>{e.exports=n.p+"assets/fonts/Inter-ExtraBold.woff"},210:(e,t,n)=>{e.exports=n.p+"assets/fonts/Inter-ExtraBold.woff2"},663:(e,t,n)=>{e.exports=n.p+"assets/fonts/Inter-Regular.woff"},275:(e,t,n)=>{e.exports=n.p+"assets/fonts/Inter-Regular.woff2"},93:(e,t,n)=>{e.exports=n.p+"assets/fonts/Inter-SemiBold.woff"},201:(e,t,n)=>{e.exports=n.p+"assets/fonts/Inter-SemiBold.woff2"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,exports:{}};return e[a](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),a=n(795),r=n.n(a),i=n(569),o=n.n(i),s=n(565),d=n.n(s),c=n(216),l=n.n(c),u=n(589),p=n.n(u),h=n(800),g={};g.styleTagTransform=p(),g.setAttributes=d(),g.insert=o().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),t()(h.Z,g),h.Z&&h.Z.locals&&h.Z.locals;class m{static isLastPage(e){let t,n,a;return"garage"===e?(t=m.savedState.pageNumGarage,n=m.savedState.pageLimitGarage,a=m.savedState.totalCars):(t=m.savedState.pageNumWinners,n=m.savedState.pageLimitWinners,a=m.savedState.totalWinners),!(t*n<a)}}m.savedState={pageNumGarage:1,pageLimitGarage:7,cars:[],totalCars:0,page:"garage",id:"",animation:{},race:!1,winnerFound:!1,controller:{},pageNumWinners:1,pageLimitWinners:10,winners:[],totalWinners:0};const f=m,v=class{render(){this.renderHeader(),this.renderMain(),this.renderFooter(f.savedState.page)}renderPagination(e){let t;return"garage"===e&&(t=f.savedState.pageNumGarage),"winners"===e&&(t=f.savedState.pageNumWinners),`<button class="previous-btn">previous</button>\n    <p>Page <span class="current-page">${t}</span></p>\n  <button class="next-btn">next</button>`}renderFooter(e){const t=`<footer class="pagination container">\n    ${this.renderPagination(e)}\n  </footer>`;document.body.innerHTML+=t}renderHeader(){document.body.innerHTML='<header class="header container">\n      <nav class="navigation">\n        <ul class="nav-list">\n          <li class="nav-item nav-item-active">Garage</li>\n          <li class="nav-item">Winners</li>\n        </ul>\n      </nav>\n    </header>'}renderMain(){document.body.innerHTML+='<main class="main container">\n    <h1 class="hidden">Async race</h1>\n    </main>'}};var b=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function s(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}d((a=a.apply(e,t||[])).next())}))};const x=class{getGarage(e,t,n,a){return b(this,void 0,void 0,(function*(){const r=yield fetch(`${e}${t}?_page=${n}&_limit=${a}`);return{cars:yield r.json(),total:r.headers.get("X-Total-Count")}}))}createCar(e,t,n,a,r){return b(this,void 0,void 0,(function*(){const i=yield fetch(`${e}${t}`,{method:n,body:a,headers:r});return yield i.json()}))}updateCar(e,t,n,a,r,i){return b(this,void 0,void 0,(function*(){const o=yield fetch(`${e}${t}/${n}`,{method:a,body:r,headers:i});return yield o.json()}))}deleteCar(e,t,n,a){return b(this,void 0,void 0,(function*(){const r=yield fetch(`${e}${t}/${n}`,{method:a});return yield r.json()}))}startStopCar(e,t,n,a,r){return b(this,void 0,void 0,(function*(){const i=yield fetch(`${e}${t}?id=${+n}&status=${a}&speed=0`,{method:r}),o=yield i.json(),{velocity:s,distance:d}=o;return{velocity:s,distance:d}}))}switchEngine(e,t,n,a,r,i){return b(this,void 0,void 0,(function*(){const o=yield fetch(`${e}${t}?id=${n}&status=${a}`,{method:r,signal:i});return o.ok||500===o.status||console.log("Error",o),500===o.status?{success:!1}:yield o.json()}))}},y=class{static start(e,t){const n=document.getElementById(`car-item-${e}`),a=document.getElementById(`car-finish-${e}`);if(n&&a){const r=n.clientWidth,i=r-(r-a.offsetLeft+a.offsetWidth);this.animate(e,i,t)}}static animate(e,t,n){const a=document.getElementById(`car-image-${e}`);if(a){let r=a.offsetLeft;const i=(t-r)/(n/1e3*60),o=()=>{if(r+=i,a.style.transform=`translateX(${r}px)`,r<t){const t=requestAnimationFrame(o);f.savedState.animation[e]=t}};o()}}};var w;!function(e){e.Garage="/garage",e.Engine="/engine",e.Winners="/winners"}(w||(w={}));const S=class{static generateCarsData(){return this.getRandomCarsArr().map((e=>{const t={};return t.name=e,t.color=this.getRandomColor(),t}))}static getRandomInt(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+Math.ceil(e)}static getRandomElem(e){return e[this.getRandomInt(0,e.length-1)]}static getRandomColor(){let e="#";for(let t=0;t<6;t+=1)e+=this.getRandomElem("0123456789ABCDEF");return e}static getRandomCarsArr(){const e={Audi:["A1","A3","A4","A5","A6","A7","A8","e-tron GT","TT","R8"],VW:["Golf","Polo","Jetta","Passat","Tiguan","Beetle","Up","Caddy","Touran","Kaddy"],Kia:["Seed","Rio","K5","Optima","Soul","Sorento","Sportage","Picanto","K8"],Skoda:["Fabia","Rapid","Octavia","Superb","Karoq","Kodiaq","Roomster","Yeti"],Renault:["Arkana","Captur","Clio","Docker","Duster","Fluence","Kaptur","Logan"],Toyota:["Corolla","Camry","Auris","Avensis","Celica","IQ","Prius","Mark II","Supra"],Mazda:["3","6","323","626","CX-5","Tribute"],Mercedes:["C-class","E-class","S-class","CLA","AMG GT","GL","ML"],Citroen:["Picasso","Berlingo","C4","Xantia","Xsara"],Porshe:["911","Cayenne","Spyder","Carrera GT","Panamera","Boxster"]},t=Object.keys(e),n=[];for(let a=0;a<100;a+=1){const a=this.getRandomElem(t),r=this.getRandomElem(e[a]);n.push(`${a} ${r}`)}return n}};var C=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function s(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}d((a=a.apply(e,t||[])).next())}))};const E=class{constructor(){this.getCars=()=>C(this,void 0,void 0,(function*(){const e=w.Garage,t=f.savedState.pageLimitGarage,n=f.savedState.pageNumGarage,{cars:a,total:r}=yield this.model.getGarage("http://127.0.0.1:3000",e,n,t),i=[...yield a];f.savedState.cars=i,r&&(f.savedState.totalCars=+r)})),this.createCar=()=>C(this,void 0,void 0,(function*(){const e=document.querySelector("#create-name");let t="";e&&(t=e.value);const n=document.querySelector("#create-color");let a="#55ff5c";n&&(a=n.value);const r={name:t,color:a},i=w.Garage,o=JSON.stringify(r);yield this.model.createCar("http://127.0.0.1:3000",i,"POST",o,{"Content-Type":"application/json"}),this.garage.clearGaragePage(),this.run(),f.isLastPage("garage")||this.enableBtn("next")})),this.updateCar=()=>C(this,void 0,void 0,(function*(){const{id:e}=f.savedState,t=document.querySelector("#update-name");let n="";t&&(n=t.value);const a=document.querySelector("#update-color");let r="#55ff5c";a&&(r=a.value);const i={name:n,color:r},o=w.Garage,s=JSON.stringify(i);yield this.model.updateCar("http://127.0.0.1:3000",o,e,"PUT",s,{"Content-Type":"application/json"}),this.garage.clearGaragePage(),this.run()})),this.deleteCar=e=>C(this,void 0,void 0,(function*(){const t=this.rememberId(e),n=w.Garage;yield this.model.deleteCar("http://127.0.0.1:3000",n,t,"DELETE"),this.garage.clearGaragePage(),this.run(),f.isLastPage("garage")?this.disableBtn("next"):this.enableBtn("next")})),this.startCar=(e,t)=>C(this,void 0,void 0,(function*(){var n;const a=null!==(n=this.rememberId(e))&&void 0!==n?n:null==t?void 0:t.toString();if(a){this.handleStopBtn(a,"enable"),this.handleDriveBtn(a,"disable");const e="http://127.0.0.1:3000",t=w.Engine,n="started",r="PATCH",{velocity:i,distance:o}=yield this.model.startStopCar(e,t,a,n,r),s=o/i;this.switchEngine(a).catch(console.log),y.start(a,s)}})),this.switchEngine=e=>C(this,void 0,void 0,(function*(){const t=w.Engine,n=new AbortController,{signal:a}=n;f.savedState.controller[e]=n;const r=yield this.model.switchEngine("http://127.0.0.1:3000",t,e,"drive","PATCH",a);if(console.log(r.success),r.success||cancelAnimationFrame(f.savedState.animation[e]),r.success&&f.savedState.race&&!f.savedState.winnerFound){const t=f.savedState.cars.filter((t=>(null==t?void 0:t.id)===+e))[0];t&&(this.showWinnerPopup(t.name,e),setTimeout((()=>this.hideWinnerPopup()),5e3)),f.savedState.winnerFound=!0}})),this.stopCar=e=>C(this,void 0,void 0,(function*(){const t=this.rememberId(e),n=w.Engine;yield this.model.startStopCar("http://127.0.0.1:3000",n,t,"stopped","PATCH"),f.savedState.controller[t].abort(),this.handleDriveBtn(t,"enable"),this.handleStopBtn(t,"disable"),cancelAnimationFrame(f.savedState.animation[t]),this.garage.setCarInitialPosition(t)})),this.generateCars=()=>C(this,void 0,void 0,(function*(){const e=S.generateCarsData(),t=w.Garage,n={"Content-Type":"application/json"},a=e.map((e=>C(this,void 0,void 0,(function*(){const a=JSON.stringify(e);yield this.model.createCar("http://127.0.0.1:3000",t,"POST",a,n)}))));return this.garage.clearGaragePage(),this.run(),this.enableBtn("next"),a})),this.raceAll=()=>C(this,void 0,void 0,(function*(){f.savedState.race=!0,this.disableBtn("race"),this.disableBtn("generate"),this.enableBtn("reset"),this.disableBtn("previous"),this.disableBtn("next");const e=w.Engine,t=f.savedState.cars.map((e=>null==e?void 0:e.id.toString())),n=t.map((t=>C(this,void 0,void 0,(function*(){if(!t)throw new Error("no id");const{velocity:n,distance:a}=yield this.model.startStopCar("http://127.0.0.1:3000",e,t,"started","PATCH");return{velocity:n,distance:a}})))),a=(yield Promise.all(n)).map((e=>e.distance/e.velocity));console.log(a),t.forEach(((e,t)=>{e&&(this.handleDriveBtn(e,"disable"),this.switchEngine(e).catch(console.log),y.start(e,a[t]))}))})),this.resetRace=()=>C(this,void 0,void 0,(function*(){this.disableBtn("reset"),this.enableBtn("race"),this.enableBtn("generate"),1!==f.savedState.pageNumGarage&&this.enableBtn("previous"),f.isLastPage("garage")||this.enableBtn("next"),f.savedState.cars.map((e=>null==e?void 0:e.id.toString())).forEach((e=>C(this,void 0,void 0,(function*(){if(e){if(f.savedState.race){const t="http://127.0.0.1:3000",n=w.Engine,a="stopped",r="PATCH";yield this.model.startStopCar(t,n,e,a,r),f.savedState.controller[e].abort(),cancelAnimationFrame(f.savedState.animation[e])}this.garage.setCarInitialPosition(e),this.handleDriveBtn(e,"enable")}})))),f.savedState.race=!1,f.savedState.winnerFound=!1})),this.garage=new class{render(){const e=document.querySelector(".main");e&&(e.innerHTML+=this.renderMain(f.savedState))}clearGaragePage(){const e=document.querySelector(".main"),t=document.querySelector(".garage-wrapper");e&&t&&e.removeChild(t)}setCarInitialPosition(e){const t=document.getElementById(`car-image-${e}`);t&&(t.style.transform="translateX(0)")}renderCarEditControls(e){return`<div class="edit-car">\n    <input class="garage-input" type="text" name="${e}-input" id="${e}-name">\n    <input class="garage-input color-input" type="color" name="color-input" id="${e}-color" value="#55ff5c">\n    <button class="edit-btn ${e}-btn">${e}</button>\n  </div>`}renderHeader(){return`<div class="edit-wrapper">\n    ${this.renderCarEditControls("create")}\n    ${this.renderCarEditControls("update")}\n  </div>`}renderButton(e,t){return`<button class="${e}-btn" id="${e}-btn-${t}">${e}</button>`}renderCarImage(e,t){return`<div class="car-image" id="car-image-${t}">\n    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="60" fill="none">\n      <path fill=${e} d="M93.346 30.607c1.012 0 1.828.967 1.876 2.175-.93-.647-2.032-1.11-3.228-1.486.34-.419.822-.689 1.352-.689ZM42.378 44.46c2.976 0 5.394 2.4 5.394 5.344 0 2.948-2.418 5.344-5.394 5.344-2.994 0-5.428-2.396-5.428-5.344.002-2.944 2.434-5.344 5.428-5.344Zm-.01 7.6a2.264 2.264 0 0 0 2.264-2.256 2.256 2.256 0 0 0-2.264-2.26 2.261 2.261 0 0 0-2.278 2.26c0 1.237 1.018 2.256 2.278 2.256ZM82.554 44.963c2.97 0 5.39 2.4 5.39 5.344 0 2.948-2.42 5.344-5.39 5.344a5.408 5.408 0 0 1-3.858-1.583 5.264 5.264 0 0 1-1.576-3.761c0-1.425.558-2.763 1.572-3.765a5.426 5.426 0 0 1 3.862-1.579Zm-.012 7.6a2.261 2.261 0 0 0 2.262-2.256 2.254 2.254 0 0 0-2.262-2.251 2.257 2.257 0 0 0-2.276 2.251 2.266 2.266 0 0 0 2.276 2.256Z"/>\n      <path fill=${e} d="M82.554 42.854c4.106 0 7.442 3.342 7.442 7.453 0 4.115-3.336 7.461-7.442 7.461a7.418 7.418 0 0 1-5.284-2.183 7.388 7.388 0 0 1-2.202-5.28c0-2.01.784-3.887 2.202-5.294a7.505 7.505 0 0 1 5.284-2.157Zm-3.856 11.214a5.413 5.413 0 0 0 3.858 1.583c2.97 0 5.39-2.395 5.39-5.344 0-2.944-2.42-5.344-5.39-5.344-1.47 0-2.84.56-3.862 1.58a5.256 5.256 0 0 0-1.572 3.764c0 1.423.56 2.75 1.576 3.761Z"/>\n      <path fill=${e} d="M82.542 48.056a2.252 2.252 0 1 1 0 4.507 2.265 2.265 0 0 1-2.276-2.256 2.258 2.258 0 0 1 2.276-2.251ZM20.502 34.574H9.136v1.744h11.366v-1.744ZM20.634 45.31H9.264v1.744h11.37V45.31ZM20.634 39.584H1.456v2.014h19.178v-2.014ZM42.378 42.347c4.106 0 7.448 3.346 7.448 7.457 0 4.107-3.342 7.453-7.448 7.453-4.122 0-7.478-3.346-7.478-7.453 0-4.111 3.358-7.457 7.478-7.457Zm0 12.801c2.976 0 5.394-2.396 5.394-5.344 0-2.944-2.418-5.344-5.394-5.344-2.994 0-5.428 2.4-5.428 5.344.002 2.948 2.434 5.344 5.428 5.344Z"/>\n      <path fill=${e} d="M42.368 47.544a2.254 2.254 0 0 1 2.264 2.26 2.264 2.264 0 0 1-2.264 2.255c-1.26 0-2.278-1.018-2.278-2.255a2.263 2.263 0 0 1 2.278-2.26ZM60.968 12.74v17.086H58.25V12.584c.94.004 1.84.063 2.718.156Z"/>\n      <path fill=${e} d="M58.25 11.598h2.718v1.144a26.805 26.805 0 0 0-2.718-.157v-.987ZM60.968 31.747H58.25v-1.921h2.718v1.921ZM95.22 32.782c-.046-1.208-.864-2.175-1.876-2.175-.53 0-1.012.27-1.354.689a19.2 19.2 0 0 0-2.126-.524c.684-1.369 1.974-2.311 3.478-2.311 2.192 0 3.974 1.981 3.974 4.418 0 .588-.11 1.157-.298 1.668a7.61 7.61 0 0 0-1.798-1.764Z"/>\n      <path fill=${e} d="M93.346 37.298c-2.196 0-3.974-1.982-3.974-4.419 0-.769.194-1.478.496-2.105.736.145 1.452.31 2.126.524a2.491 2.491 0 0 0-.542 1.583c0 1.248.846 2.272 1.894 2.272 1.042 0 1.892-1.023 1.892-2.272 0-.037-.016-.064-.018-.097a7.725 7.725 0 0 1 1.8 1.763c-.596 1.614-2.014 2.75-3.674 2.75Z"/>\n      <path fill=${e} d="M23.418 32.486a3.07 3.07 0 0 0 2.152.87c1.694 0 3.062-1.337 3.062-2.988 0-1.36-.938-2.5-2.222-2.856 1.67-1.61 3.9-2.593 6.756-2.556-2.598-7.736 1.092-13.195 11.116-16.33 6.42-1.335 12.802-1.743 19.178 0 11.194 1.97 18.7 8.815 21.692 21.521 1.636.14 3.228.334 4.716.63a4.841 4.841 0 0 0-.496 2.104c0 2.437 1.78 4.419 3.974 4.419 1.66 0 3.078-1.136 3.676-2.75.12.16.26.3.372.474.506 1.156.866 2.26 1.15 3.337H95.59v7.474h2.894c-.88 2.505-2.683 4.648-5.52 6.363H91.79c.046-.313.046-.672.046-.988 0-5.948-4.256-10.776-9.508-10.776-5.29 0-9.543 4.828-9.543 10.776 0 .314 0 .672.042.988h-20.91c0-.313.04-.672.04-.988 0-5.948-4.291-10.776-9.541-10.776S32.91 45.262 32.91 51.21c0 .314 0 .672.043.988h-1.996c-6.889.204-10.24-11.583-7.538-19.712h-.001Zm20.864-2.66H58.25v1.921h2.718v-1.921h17.806c-2.706-10.414-8.636-16.123-17.806-17.086v-1.144H58.25v.988c-.748 0-1.512.02-2.296.072-8.902.535-12.976 6.847-11.672 17.17Z"/></svg>\n  </div>`}renderCarTracks(e){return e.map((e=>`<li class="car-item" id="car-item-${null==e?void 0:e.id}">\n    <div class="car-header">\n      <div class="car-selection">\n        ${this.renderButton("select",null==e?void 0:e.id)}\n        ${this.renderButton("remove",null==e?void 0:e.id)}\n      </div>\n      <p class="car-name">${null==e?void 0:e.name}</p>\n    </div>\n    <div class="car-body">\n      <div class="car-drive-controls">\n        <button class="drive-btn" id="drive-btn-${null==e?void 0:e.id}">D</button>\n        <button class="stop-btn" id="stop-btn-${null==e?void 0:e.id}">S</button>\n      </div>\n      ${this.renderCarImage(null==e?void 0:e.color,null==e?void 0:e.id)}\n      <div class="finish" id="car-finish-${null==e?void 0:e.id}">\n        <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="none"><path fill="currentColor" d="M23.39.672c-5.794.432-11.455 2.543-15.966 5.962-.995.743-1.187.851-1.235.671-.036-.12-.228-.648-.444-1.175-.48-1.176-.851-1.476-1.631-1.26-.576.156-.852.504-.852 1.092 0 .6-.42-.588 15.534 43.877 1.679 4.702 3.142 8.708 3.25 8.9.564 1.103 2.207.744 2.207-.48 0-.312-.971-3.179-2.927-8.637L18.4 41.454l.624-.564c2.015-1.823 5.277-3.802 7.557-4.594 1.715-.6 2.89-.756 4.99-.684 2.183.084 4.21.408 6.465 1.043 4.078 1.152 5.134 1.344 7.509 1.332 2.615 0 4.714-.36 7.437-1.284 1.667-.552 3.167-1.247 3.478-1.607.24-.264.24-.456.276-16.853.012-10.46-.012-16.709-.084-16.9-.276-.708-1.295-.924-1.98-.409-1.835 1.38-4.546 2.891-6.512 3.646-1.368.516-3.131.888-4.535.96-2.338.132-4.09-.384-8.696-2.543C30.611.984 27.564.372 23.389.672Zm3.79 2.495c.06.108 2.47 9.116 2.47 9.248 0 .036-.72.06-1.583.036a24.751 24.751 0 0 0-5.385.456c-1.224.24-3.802.912-4.054 1.068-.108.072.372 1.439 1.895 5.35 1.127 2.878 2.051 5.3 2.051 5.385-.012.072-.647.444-1.427.815-1.631.792-3.49 1.992-5.278 3.431-.684.552-1.308 1.031-1.38 1.055-.084.036-.947-2.219-2.146-5.553l-2.016-5.614.396-.336c1.404-1.187 3.97-2.759 6.238-3.814.78-.36 1.415-.707 1.415-.78 0-.071-.755-2.063-1.68-4.426-.923-2.374-1.643-4.342-1.583-4.39.132-.12 1.716-.672 2.915-1.007 1.296-.372 2.639-.636 4.186-.84 1.296-.168 4.87-.228 4.966-.084Zm9.92 3.515c1.38.564 2.59.935 3.695 1.127 1.271.228 3.502.228 4.75 0 .528-.096 1.02-.18 1.091-.18.072 0 .252 1.595.468 4.402.192 2.435.36 4.438.372 4.462.024.024.54-.132 1.152-.348 1.247-.432 3.442-1.499 4.714-2.278.468-.276.875-.528.935-.564.048-.024.084 2.326.084 5.23v5.29l-.564.287c-.875.432-3.083 1.224-4.342 1.56-.612.168-1.14.324-1.175.348-.024.024.12 2.087.324 4.57.204 2.495.336 4.57.3 4.618-.192.312-4.595.456-5.818.18-.288-.06-.336-.216-1.355-4.69-.576-2.543-1.02-4.654-.996-4.69.036-.036.732.036 1.536.144.815.108 1.907.192 2.434.192.9 0 3.37-.276 3.479-.384.048-.048-.672-9.236-.732-9.308-.012-.024-.576.048-1.247.168-2.315.384-4.69.096-7.065-.84-.432-.167-.78-.3-.804-.275-.012.012.492 2.278 1.115 5.037.636 2.759 1.116 5.038 1.092 5.074-.036.024-1.056-.204-2.268-.528a126.247 126.247 0 0 0-3.646-.924c-.792-.168-1.547-.36-1.68-.42-.203-.072-.48-.971-1.715-5.65-.804-3.058-1.463-5.613-1.463-5.673.012-.396 3.095.576 6.273 1.968 1.2.528 2.183.935 2.195.923.024-.024-1.848-8.264-2.04-8.996-.024-.108-.036-.204-.012-.204.013 0 .421.168.913.372Zm-5.41 17.152c.552.072 1.02.132 1.044.144.012.012.563 2.076 1.235 4.583.66 2.506 1.235 4.63 1.26 4.726.06.132-.06.156-.625.084-3.118-.36-5.565-.3-7.437.18-.552.144-1.031.228-1.067.192-.18-.18-3.395-8.9-3.323-8.973.144-.144 3.299-.935 4.222-1.055.877-.12 3.096-.06 4.691.12Z"/></svg>\n      </div>\n    </div>\n  </li>`)).join("")}renderWinnerPopUp(){return'<div class="winner-popup hidden">\n    <div class="winner-text"></div>\n  </div>'}renderMain(e){return`<div class="garage-wrapper">\n    ${this.renderHeader()}\n    <div class="race-wrapper">\n      ${this.renderButton("race")}\n      ${this.renderButton("reset")}\n      <button class="generate-btn">Generate cars</button>\n    </div>\n\n    ${this.renderWinnerPopUp()}\n    <div class="cars-wrapper">\n      <h2 class="page-title">Garage<span class="total-cars"> (${e.totalCars})</span></h2>\n      <ul class="cars-list">\n        ${this.renderCarTracks(e.cars)}\n      </ul>\n    </div>\n  </div>`}},this.model=new x,this.view=new v}run(){return C(this,void 0,void 0,(function*(){this.garage.clearGaragePage(),yield this.getCars(),this.garage.render(),this.disableUpdate(),this.disableBtns(),this.listenButtons()}))}disableUpdate(){const e={updateBtn:document.querySelector(".update-btn"),updateInput:document.querySelector("#update-name"),updateColor:document.querySelector("#update-color")};Object.values(e).forEach((e=>null==e?void 0:e.setAttribute("disabled","disabled")))}enableUpdate(){const e={updateBtn:document.querySelector(".update-btn"),updateInput:document.querySelector("#update-name"),updateColor:document.querySelector("#update-color")},t=f.savedState.cars.filter((e=>(null==e?void 0:e.id)===+f.savedState.id))[0];if(t){const{name:n,color:a}=t;e.updateInput instanceof HTMLInputElement&&(e.updateInput.value=n),e.updateColor instanceof HTMLInputElement&&(e.updateColor.value=a)}Object.values(e).forEach((e=>null==e?void 0:e.removeAttribute("disabled")))}disableBtn(e){const t=document.querySelector(`.${e}-btn`);null==t||t.setAttribute("disabled","disabled")}enableBtn(e){const t=document.querySelector(`.${e}-btn`);null==t||t.removeAttribute("disabled")}disableBtns(){this.disableBtn("reset");const e=document.querySelectorAll(".stop-btn");null==e||e.forEach((e=>null==e?void 0:e.setAttribute("disabled","disabled")))}handleStopBtn(e,t){const n=document.getElementById(`stop-btn-${e}`);"enable"===t&&(null==n||n.removeAttribute("disabled")),"disable"===t&&(null==n||n.setAttribute("disabled","disabled"))}handleDriveBtn(e,t){const n=document.getElementById(`drive-btn-${e}`);"enable"===t&&(null==n||n.removeAttribute("disabled")),"disable"===t&&(null==n||n.setAttribute("disabled","disabled"))}listenEditBtns(){var e,t;const n={createBtn:document.querySelector(".create-btn"),updateBtn:document.querySelector(".update-btn")};null===(e=n.createBtn)||void 0===e||e.addEventListener("click",this.createCar),null===(t=n.updateBtn)||void 0===t||t.addEventListener("click",this.updateCar)}listenRaceBtns(){var e,t,n;const a={raceBtn:document.querySelector(".race-btn"),resetBtn:document.querySelector(".reset-btn"),generateBtn:document.querySelector(".generate-btn")};null===(e=a.raceBtn)||void 0===e||e.addEventListener("click",this.raceAll),null===(t=a.resetBtn)||void 0===t||t.addEventListener("click",this.resetRace),null===(n=a.generateBtn)||void 0===n||n.addEventListener("click",this.generateCars)}listenDriveControls(){const e=document.querySelectorAll(".drive-btn");null==e||e.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.startCar(e)}))}));const t=document.querySelectorAll(".stop-btn");null==t||t.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.stopCar(e)}))}))}listenButtons(){this.listenEditBtns(),this.listenRaceBtns(),this.listenDriveControls();const e=document.querySelectorAll(".select-btn");null==e||e.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.rememberId(e),this.enableUpdate()}))}));const t=document.querySelectorAll(".remove-btn");null==t||t.forEach((e=>{null==e||e.addEventListener("click",(e=>{this.deleteCar(e)}))}))}updateTotalPages(){const e=document.querySelector("total-pages"),t=Math.ceil(f.savedState.totalCars/f.savedState.pageLimitGarage);(null==e?void 0:e.textContent)&&(e.textContent=t.toString()),console.log("totalPages",e),console.log("maxPages",t)}rememberId(e){let t="";if((null==e?void 0:e.target)instanceof HTMLElement){const n=e.target.id.split("-");t=n[n.length-1]}return f.savedState.id=t,t}showWinnerPopup(e,t){const n=document.querySelector(".winner-popup"),a=document.querySelector(".winner-text");n&&a&&(n.classList.remove("hidden"),a.textContent=`Car ${e} (id ${t}) won the race!`)}hideWinnerPopup(){const e=document.querySelector(".winner-popup"),t=document.querySelector(".winner-text");e&&t&&(e.classList.add("hidden"),t.textContent="")}},B=class{constructor(){this.winners=new class{render(){const e=document.querySelector(".main");e&&(e.innerHTML+=this.renderMain())}renderMain(){return'<div class="winners-wrapper hidden">\n    <h2 class="page-title">Winners</h2>\n  </div>'}},this.model=new x}run(){this.winners.render()}};var P=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function s(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}d((a=a.apply(e,t||[])).next())}))};(new class{constructor(){this.controller=new class{constructor(){this.view=new v,this.garage=new E,this.winners=new B,this.pagination=new class{constructor(){this.view=new v,this.garage=new E,this.winners=new B}refreshPagination(e){const t=document.querySelector(".pagination");t&&(t.innerHTML="",t.innerHTML=this.view.renderPagination(e)),this.handlePagination(e)}handlePagination(e){var t,n,a,r,i,o;return P(this,void 0,void 0,(function*(){yield this.garage.getCars();const s={previousBtn:document.querySelector(".previous-btn"),curPage:document.querySelector(".current-page"),nextBtn:document.querySelector(".next-btn")};s.curPage&&(s.curPage.textContent="garage"===e?f.savedState.pageNumGarage.toString():f.savedState.pageNumWinners.toString(),f.savedState.pageNumGarage>1?null===(t=s.previousBtn)||void 0===t||t.removeAttribute("disabled"):null===(n=s.previousBtn)||void 0===n||n.setAttribute("disabled","disabled"),f.isLastPage(e)?null===(a=s.nextBtn)||void 0===a||a.setAttribute("disabled","disabled"):null===(r=s.nextBtn)||void 0===r||r.removeAttribute("disabled")),null===(i=s.nextBtn)||void 0===i||i.addEventListener("click",(()=>{this.switchToNextPage(e)})),null===(o=s.previousBtn)||void 0===o||o.addEventListener("click",(()=>{this.switchToPreviousPage(e)}))}))}switchToNextPage(e){return P(this,void 0,void 0,(function*(){"garage"===e?(f.savedState.pageNumGarage+=1,yield this.garage.run(),this.refreshPagination(e)):(f.savedState.pageNumWinners+=1,yield this.winners.run(),this.refreshPagination(e))}))}switchToPreviousPage(e){return P(this,void 0,void 0,(function*(){"garage"===e?(f.savedState.pageNumGarage-=1,yield this.garage.run(),this.refreshPagination(e)):(f.savedState.pageNumWinners-=1,yield this.winners.run(),this.refreshPagination(e))}))}}}run(){this.view.render(),this.listenNav(),this.garage.run(),this.winners.run(),this.pagination.refreshPagination(f.savedState.page)}listenNav(){document.querySelectorAll(".nav-item").forEach((e=>{e.addEventListener("click",(t=>{var n;this.changeView(t),null===(n=document.querySelector(".nav-item-active"))||void 0===n||n.classList.remove("nav-item-active"),e.classList.add("nav-item-active")}))}))}changeView(e){const t=document.querySelector(".garage-wrapper"),n=document.querySelector(".winners-wrapper");t&&n&&e.target instanceof HTMLLIElement&&("garage"===e.target.innerText.toLowerCase()?(n.classList.add("hidden"),t.classList.remove("hidden"),f.savedState.page="garage",this.pagination.refreshPagination("garage")):(t.classList.add("hidden"),n.classList.remove("hidden"),f.savedState.page="winners",this.pagination.refreshPagination("winners")))}}}start(){try{this.controller.run()}catch(e){e instanceof Error&&console.log("Error",e.toString())}}}).start()})()})();